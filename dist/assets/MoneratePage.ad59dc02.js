var Ne=Object.defineProperty,Ce=Object.defineProperties;var Pe=Object.getOwnPropertyDescriptors;var U=Object.getOwnPropertySymbols;var se=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable;var oe=(r,n,i)=>n in r?Ne(r,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):r[n]=i,K=(r,n)=>{for(var i in n||(n={}))se.call(n,i)&&oe(r,i,n[i]);if(U)for(var i of U(n))le.call(n,i)&&oe(r,i,n[i]);return r},J=(r,n)=>Ce(r,Pe(n));var Q=(r,n)=>{var i={};for(var e in r)se.call(r,e)&&n.indexOf(e)<0&&(i[e]=r[e]);if(r!=null&&U)for(var e of U(r))n.indexOf(e)<0&&le.call(r,e)&&(i[e]=r[e]);return i};import{R as O,u as me,j as l,B as v,a as x,F as B,b as q,f as X,D as W,c as re,r as P,P as G,G as E,T as b,d as _,e as Re,g as V,C as Fe,h as Ie,i as Te,m as Ae,k as Me,l as Oe,n as Ve,M as ee,w as ge,o as $e,I as Be,p as je,q as ke,s as Le,t as Ue,v as Ke,x as We,y as Ge,S as _e,z as qe,A as ze,E as Ze,H as He,J as Je,K as Qe,L as Ye,N as $,O as Xe,Q as et,U as tt,V as rt,W as at,X as nt,Y as it,Z as ot}from"./index.5f659e0f.js";const st=(r,n)=>{let i=[...n];return r.placeId&&(i=i.filter(e=>{var t;return((t=e.place)==null?void 0:t.id)===r.placeId})),r.categoryId&&(i=i.filter(e=>{var t;return((t=e.category)==null?void 0:t.id)===r.categoryId})),r.name.length&&(i=i.filter(e=>e.name.toUpperCase().includes(r.name.toUpperCase())||e.description.toUpperCase().includes(r.name.toUpperCase()))),i=i.filter(e=>r.valueRange[0]<=e.value&&e.value<=r.valueRange[1]),r.minRating&&(i=i.filter(e=>e.rating>=r.minRating)),i};function R(){}function lt(){return!0}function M(r){return!!(r||"").match(/\d/)}function ce(r){return r==null}function ue(r){return r.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function ct(r){switch(r){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function ut(r,n,i){var e=ct(i),t=r.search(/[1-9]/);return t=t===-1?r.length:t,r.substring(0,t)+r.substring(t,r.length).replace(e,"$1"+n)}function te(r,n){n===void 0&&(n=!0);var i=r[0]==="-",e=i&&n;r=r.replace("-","");var t=r.split("."),a=t[0],o=t[1]||"";return{beforeDecimal:a,afterDecimal:o,hasNagation:i,addNegation:e}}function ft(r){if(!r)return r;var n=r[0]==="-";n&&(r=r.substring(1,r.length));var i=r.split("."),e=i[0].replace(/^0+/,"")||"0",t=i[1]||"";return(n?"-":"")+e+(t?"."+t:"")}function ve(r,n,i){for(var e="",t=i?"0":"",a=0;a<=n-1;a++)e+=r[a]||t;return e}function fe(r,n){return Array(n+1).join(r)}function dt(r){r+="";var n=r[0]==="-"?"-":"";n&&(r=r.substring(1));var i=r.split(/[eE]/g),e=i[0],t=i[1];if(t=Number(t),!t)return n+e;e=e.replace(".","");var a=1+t,o=e.length;return a<0?e="0."+fe("0",Math.abs(a))+e:a>=o?e=e+fe("0",a-o):e=(e.substring(0,a)||"0")+"."+e.substring(a),n+e}function pt(r,n,i){if(["","-"].indexOf(r)!==-1)return r;var e=r.indexOf(".")!==-1&&n,t=te(r),a=t.beforeDecimal,o=t.afterDecimal,c=t.hasNagation,s=parseFloat("0."+(o||"0")),f=o.length<=n?"0."+o:s.toFixed(n),u=f.split("."),d=a.split("").reverse().reduce(function(h,y,D){return h.length>D?(Number(h[0])+Number(y)).toString()+h.substring(1,h.length):y+h},u[0]),p=ve(u[1]||"",Math.min(n,o.length),i),m=c?"-":"",g=e?".":"";return""+m+d+g+p}function de(r,n){if(r.value=r.value,r!==null){if(r.createTextRange){var i=r.createTextRange();return i.move("character",n),i.select(),!0}return r.selectionStart||r.selectionStart===0?(r.focus(),r.setSelectionRange(n,n),!0):(r.focus(),!1)}}function ht(r,n){for(var i=0,e=0,t=r.length,a=n.length;r[i]===n[i]&&i<t;)i++;for(;r[t-1-e]===n[a-1-e]&&a-e>i&&t-e>i;)e++;return{start:i,end:t-e}}function Y(r,n,i){return Math.min(Math.max(r,n),i)}function pe(r){return Math.max(r.selectionStart,r.selectionEnd)}function mt(r){return r||typeof navigator!="undefined"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function gt(r,n){var i={};for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&n.indexOf(e)===-1&&(i[e]=r[e]);return i}var vt={displayType:"input",decimalSeparator:".",thousandsGroupStyle:"thousand",fixedDecimalScale:!1,prefix:"",suffix:"",allowNegative:!0,allowEmptyFormatting:!1,allowLeadingZeros:!1,isNumericString:!1,type:"text",onValueChange:R,onChange:R,onKeyDown:R,onMouseUp:R,onFocus:R,onBlur:R,isAllowed:lt},j=function(r){function n(i){r.call(this,i);var e=i.defaultValue;this.validateProps();var t=this.formatValueProp(e);this.state={value:t,numAsString:this.removeFormatting(t),mounted:!1},this.selectionBeforeInput={selectionStart:0,selectionEnd:0},this.onChange=this.onChange.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onFocus=this.onFocus.bind(this),this.onBlur=this.onBlur.bind(this)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.componentDidMount=function(){this.setState({mounted:!0})},n.prototype.componentDidUpdate=function(e){this.updateValueIfRequired(e)},n.prototype.componentWillUnmount=function(){clearTimeout(this.focusTimeout),clearTimeout(this.caretPositionTimeout)},n.prototype.updateValueIfRequired=function(e){var t=this,a=t.props,o=t.state,c=t.focusedElm,s=o.value,f=o.numAsString;if(f===void 0&&(f=""),e!==a){this.validateProps();var u=this.formatNumString(f),d=ce(a.value)?u:this.formatValueProp(),p=this.removeFormatting(d),m=parseFloat(p),g=parseFloat(f);((!isNaN(m)||!isNaN(g))&&m!==g||u!==s||c===null&&d!==s)&&this.updateValue({formattedValue:d,numAsString:p,input:c})}},n.prototype.getFloatString=function(e){e===void 0&&(e="");var t=this.props,a=t.decimalScale,o=this.getSeparators(),c=o.decimalSeparator,s=this.getNumberRegex(!0),f=e[0]==="-";f&&(e=e.replace("-","")),c&&a===0&&(e=e.split(c)[0]),e=(e.match(s)||[]).join("").replace(c,".");var u=e.indexOf(".");return u!==-1&&(e=e.substring(0,u)+"."+e.substring(u+1,e.length).replace(new RegExp(ue(c),"g"),"")),f&&(e="-"+e),e},n.prototype.getNumberRegex=function(e,t){var a=this.props,o=a.format,c=a.decimalScale,s=a.customNumerals,f=this.getSeparators(),u=f.decimalSeparator;return new RegExp("[0-9"+(s?s.join(""):"")+"]"+(u&&c!==0&&!t&&!o?"|"+ue(u):""),e?"g":void 0)},n.prototype.getSeparators=function(){var e=this.props,t=e.decimalSeparator,a=this.props,o=a.thousandSeparator,c=a.allowedDecimalSeparators;return o===!0&&(o=","),c||(c=[t,"."]),{decimalSeparator:t,thousandSeparator:o,allowedDecimalSeparators:c}},n.prototype.getMaskAtIndex=function(e){var t=this.props,a=t.mask;return a===void 0&&(a=" "),typeof a=="string"?a:a[e]||" "},n.prototype.getValueObject=function(e,t){var a=parseFloat(t);return{formattedValue:e,value:t,floatValue:isNaN(a)?void 0:a}},n.prototype.validateProps=function(){var e=this.props,t=e.mask,a=this.getSeparators(),o=a.decimalSeparator,c=a.thousandSeparator;if(o===c)throw new Error(`
          Decimal separator can't be same as thousand separator.
          thousandSeparator: `+c+` (thousandSeparator = {true} is same as thousandSeparator = ",")
          decimalSeparator: `+o+` (default value for decimalSeparator is .)
       `);if(t){var s=t==="string"?t:t.toString();if(s.match(/\d/g))throw new Error(`
          Mask `+t+` should not contain numeric character;
        `)}},n.prototype.setPatchedCaretPosition=function(e,t,a){de(e,t),this.caretPositionTimeout=setTimeout(function(){e.value===a&&de(e,t)},0)},n.prototype.correctCaretPosition=function(e,t,a){var o=this.props,c=o.prefix,s=o.suffix,f=o.format;if(e==="")return 0;if(t=Y(t,0,e.length),!f){var u=e[0]==="-";return Y(t,c.length+(u?1:0),e.length-s.length)}if(typeof f=="function"||f[t]==="#"&&M(e[t])||f[t-1]==="#"&&M(e[t-1]))return t;var d=f.indexOf("#"),p=f.lastIndexOf("#");t=Y(t,d,p+1);for(var m=f.substring(t,f.length).indexOf("#"),g=t,h=t+(m===-1?0:m);g>d&&(f[g]!=="#"||!M(e[g]));)g-=1;var y=!M(e[h])||a==="left"&&t!==d||t-g<h-t;return y?M(e[g])?g+1:g:h},n.prototype.getCaretPosition=function(e,t,a){var o=this.props,c=o.format,s=this.state.value,f=this.getNumberRegex(!0),u=(e.match(f)||[]).join(""),d=(t.match(f)||[]).join(""),p,m;for(p=0,m=0;m<a;m++){var g=e[m]||"",h=t[p]||"";if(!(!g.match(f)&&g!==h)&&!(g==="0"&&h.match(f)&&h!=="0"&&u.length!==d.length)){for(;g!==t[p]&&p<t.length;)p++;p++}}return typeof c=="string"&&!s&&(p=t.length),p=this.correctCaretPosition(t,p),p},n.prototype.removePrefixAndSuffix=function(e){var t=this.props,a=t.format,o=t.prefix,c=t.suffix;if(!a&&e){var s=e[0]==="-";s&&(e=e.substring(1,e.length)),e=o&&e.indexOf(o)===0?e.substring(o.length,e.length):e;var f=e.lastIndexOf(c);e=c&&f!==-1&&f===e.length-c.length?e.substring(0,f):e,s&&(e="-"+e)}return e},n.prototype.removePatternFormatting=function(e){for(var t=this.props,a=t.format,o=a.split("#").filter(function(m){return m!==""}),c=0,s="",f=0,u=o.length;f<=u;f++){var d=o[f]||"",p=f===u?e.length:e.indexOf(d,c);if(p===-1){s=e;break}else s+=e.substring(c,p),c=p+d.length}return(s.match(/\d/g)||[]).join("")},n.prototype.removeFormatting=function(e){var t=this.props,a=t.format,o=t.removeFormatting;return e&&(a?typeof a=="string"?e=this.removePatternFormatting(e):typeof o=="function"?e=o(e):e=(e.match(/\d/g)||[]).join(""):(e=this.removePrefixAndSuffix(e),e=this.getFloatString(e)),e)},n.prototype.formatWithPattern=function(e){for(var t=this.props,a=t.format,o=0,c=a.split(""),s=0,f=a.length;s<f;s++)a[s]==="#"&&(c[s]=e[o]||this.getMaskAtIndex(o),o+=1);return c.join("")},n.prototype.formatAsNumber=function(e){var t=this.props,a=t.decimalScale,o=t.fixedDecimalScale,c=t.prefix,s=t.suffix,f=t.allowNegative,u=t.thousandsGroupStyle,d=this.getSeparators(),p=d.thousandSeparator,m=d.decimalSeparator,g=e.indexOf(".")!==-1||a&&o,h=te(e,f),y=h.beforeDecimal,D=h.afterDecimal,w=h.addNegation;return a!==void 0&&(D=ve(D,a,o)),p&&(y=ut(y,p,u)),c&&(y=c+y),s&&(D=D+s),w&&(y="-"+y),e=y+(g&&m||"")+D,e},n.prototype.formatNumString=function(e){e===void 0&&(e="");var t=this.props,a=t.format,o=t.allowEmptyFormatting,c=t.customNumerals,s=e;if(c&&c.length===10){var f=new RegExp("["+c.join("")+"]","g");s=e.replace(f,function(u){return c.indexOf(u).toString()})}return e===""&&!o?s="":e==="-"&&!a?s="-":typeof a=="string"?s=this.formatWithPattern(s):typeof a=="function"?s=a(s):s=this.formatAsNumber(s),s},n.prototype.formatValueProp=function(e){var t=this.props,a=t.format,o=t.decimalScale,c=t.fixedDecimalScale,s=t.allowEmptyFormatting,f=this.props,u=f.value,d=f.isNumericString;u=ce(u)?e:u;var p=!u&&u!==0;if(p&&s&&(u=""),p&&!s)return"";typeof u=="number"&&(u=dt(u),d=!0),u==="Infinity"&&d&&(u=""),d&&!a&&typeof o=="number"&&(u=pt(u,o,c));var m=d?this.formatNumString(u):this.formatInput(u);return m},n.prototype.formatNegation=function(e){e===void 0&&(e="");var t=this.props,a=t.allowNegative,o=new RegExp("(-)"),c=new RegExp("(-)(.)*(-)"),s=o.test(e),f=c.test(e);return e=e.replace(/-/g,""),s&&!f&&a&&(e="-"+e),e},n.prototype.formatInput=function(e){e===void 0&&(e="");var t=this.props,a=t.format;return a||(e=this.removePrefixAndSuffix(e),e=this.formatNegation(e)),e=this.removeFormatting(e),this.formatNumString(e)},n.prototype.isCharacterAFormat=function(e,t){var a=this.props,o=a.format,c=a.prefix,s=a.suffix,f=a.decimalScale,u=a.fixedDecimalScale,d=this.getSeparators(),p=d.decimalSeparator;return!!(typeof o=="string"&&o[e]!=="#"||!o&&(e<c.length||e>=t.length-s.length||f&&u&&t[e]===p))},n.prototype.correctInputValue=function(e,t,a){var o=this,c=this.props,s=c.format,f=c.allowNegative,u=c.prefix,d=c.suffix,p=c.decimalScale,m=this.getSeparators(),g=m.allowedDecimalSeparators,h=m.decimalSeparator,y=this.state.numAsString||"",D=this.selectionBeforeInput,w=D.selectionStart,F=D.selectionEnd,I=ht(t,a),S=I.start,N=I.end;if(!s&&S===N&&g.indexOf(a[w])!==-1){var k=p===0?"":h;return a.substr(0,w)+k+a.substr(w+1,a.length)}var z=s?0:u.length,Z=t.length-(s?0:d.length);if(a.length>t.length||!a.length||S===N||w===0&&F===t.length||S===0&&N===t.length||w===z&&F===Z)return a;var ne=t.substr(S,N-S),ye=!![].concat(ne).find(function(C,A){return o.isCharacterAFormat(A+S,t)});if(ye){var Se=t.substr(S),L={},T=[];[].concat(Se).forEach(function(C,A){o.isCharacterAFormat(A+S,t)?L[A]=C:A>ne.length-1&&T.push(C)}),Object.keys(L).forEach(function(C){T.length>C?T.splice(C,0,L[C]):T.push(L[C])}),a=t.substr(0,S)+T.join("")}if(!s){var ie=this.removeFormatting(a),H=te(ie,f),be=H.beforeDecimal,De=H.afterDecimal,Ee=H.addNegation,we=e<a.indexOf(h)+1;if(ie.length<y.length&&we&&be===""&&!parseFloat(De))return Ee?"-":""}return a},n.prototype.updateValue=function(e){var t=e.formattedValue,a=e.input,o=e.setCaretPosition;o===void 0&&(o=!0);var c=e.numAsString,s=e.caretPos,f=this.props,u=f.onValueChange,d=this.state,p=d.value;if(a)if(o){if(!s){var m=e.inputValue||a.value,g=pe(a);a.value=t,s=this.getCaretPosition(m,t,g)}this.setPatchedCaretPosition(a,s,t)}else a.value=t;c===void 0&&(c=this.removeFormatting(t)),t!==p&&(this.setState({value:t,numAsString:c}),u(this.getValueObject(t,c)))},n.prototype.onChange=function(e){var t=e.target,a=t.value,o=this,c=o.state,s=o.props,f=s.isAllowed,u=c.value||"",d=pe(t);a=this.correctInputValue(d,u,a);var p=this.formatInput(a)||"",m=this.removeFormatting(p),g=this.getValueObject(p,m),h=f(g);h||(p=u),this.updateValue({formattedValue:p,numAsString:m,inputValue:a,input:t}),h&&s.onChange(e)},n.prototype.onBlur=function(e){var t=this,a=t.props,o=t.state,c=a.format,s=a.onBlur,f=a.allowLeadingZeros,u=o.numAsString,d=o.value;if(this.focusedElm=null,clearTimeout(this.focusTimeout),clearTimeout(this.caretPositionTimeout),!c){isNaN(parseFloat(u))&&(u=""),f||(u=ft(u));var p=this.formatNumString(u);if(p!==d){this.updateValue({formattedValue:p,numAsString:u,input:e.target,setCaretPosition:!1}),s(e);return}}s(e)},n.prototype.onKeyDown=function(e){var t=e.target,a=e.key,o=t.selectionStart,c=t.selectionEnd,s=t.value;s===void 0&&(s="");var f,u=this.props,d=u.decimalScale,p=u.fixedDecimalScale,m=u.prefix,g=u.suffix,h=u.format,y=u.onKeyDown,D=d!==void 0&&p,w=this.getNumberRegex(!1,D),F=new RegExp("-"),I=typeof h=="string";if(this.selectionBeforeInput={selectionStart:o,selectionEnd:c},a==="ArrowLeft"||a==="Backspace"?f=o-1:a==="ArrowRight"?f=o+1:a==="Delete"&&(f=o),f===void 0||o!==c){y(e);return}var S=f,N=I?h.indexOf("#"):m.length,k=I?h.lastIndexOf("#")+1:s.length-g.length;if(a==="ArrowLeft"||a==="ArrowRight"){var z=a==="ArrowLeft"?"left":"right";S=this.correctCaretPosition(s,f,z)}else if(a==="Delete"&&!w.test(s[f])&&!F.test(s[f]))for(;!w.test(s[S])&&S<k;)S++;else if(a==="Backspace"&&!w.test(s[f])){if(o<=N+1&&s[0]==="-"&&typeof h=="undefined"){var Z=s.substring(1);this.updateValue({formattedValue:Z,caretPos:S,input:t})}else if(!F.test(s[f])){for(;!w.test(s[S-1])&&S>N;)S--;S=this.correctCaretPosition(s,S,"left")}}(S!==f||f<N||f>k)&&(e.preventDefault(),this.setPatchedCaretPosition(t,S,s)),e.isUnitTestRun&&this.setPatchedCaretPosition(t,S,s),y(e)},n.prototype.onMouseUp=function(e){var t=e.target,a=t.selectionStart,o=t.selectionEnd,c=t.value;if(c===void 0&&(c=""),a===o){var s=this.correctCaretPosition(c,a);s!==a&&this.setPatchedCaretPosition(t,s,c)}this.props.onMouseUp(e)},n.prototype.onFocus=function(e){var t=this;e.persist(),this.focusedElm=e.target,this.focusTimeout=setTimeout(function(){var a=e.target,o=a.selectionStart,c=a.selectionEnd,s=a.value;s===void 0&&(s="");var f=t.correctCaretPosition(s,o);f!==o&&!(o===0&&c===s.length)&&t.setPatchedCaretPosition(a,f,s),t.props.onFocus(e)},0)},n.prototype.render=function(){var e=this.props,t=e.type,a=e.displayType,o=e.customInput,c=e.renderText,s=e.getInputRef,f=e.format;e.thousandSeparator,e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle,e.decimalScale,e.fixedDecimalScale,e.prefix,e.suffix,e.removeFormatting,e.mask,e.defaultValue,e.isNumericString,e.allowNegative,e.allowEmptyFormatting,e.allowLeadingZeros,e.onValueChange,e.isAllowed,e.customNumerals,e.onChange,e.onKeyDown,e.onMouseUp,e.onFocus,e.onBlur,e.value;var u=gt(e,["type","displayType","customInput","renderText","getInputRef","format","thousandSeparator","decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","decimalScale","fixedDecimalScale","prefix","suffix","removeFormatting","mask","defaultValue","isNumericString","allowNegative","allowEmptyFormatting","allowLeadingZeros","onValueChange","isAllowed","customNumerals","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value"]),d=u,p=this.state,m=p.value,g=p.mounted,h=g&&mt(f)?"numeric":void 0,y=Object.assign({inputMode:h},d,{type:t,value:m,onChange:this.onChange,onKeyDown:this.onKeyDown,onMouseUp:this.onMouseUp,onFocus:this.onFocus,onBlur:this.onBlur});if(a==="text")return c?c(m,d)||null:O.createElement("span",Object.assign({},d,{ref:s}),m);if(o){var D=o;return O.createElement(D,Object.assign({},y,{ref:s}))}return O.createElement("input",Object.assign({},y,{ref:s}))},n}(O.Component);j.defaultProps=vt;const xt=r=>{const n=me(),i=r.fontSize?r.fontSize:40;return l(v,{children:r.value?x(B,{children:[l(v,{mr:1,children:Math.round(r.value*10)/10}),l(q,{icon:X,color:r.color,fontSize:i})]}):l(v,{ml:1,children:l(q,{icon:X,color:n.palette.grey[400],fontSize:i})})})},yt=r=>{const n=[],i=W.fromJSDate(new Date).toISODate(),e=W.fromJSDate(new Date).minus({days:1}).toISODate();for(const t of r){const a=W.fromISO(t.createdAt).toISODate();let o="";switch(a){case i:o="Today";break;case e:o="Yesterday";break;default:o=W.fromISO(a).toFormat("LLL dd, yyyy")}let c=n.findIndex(s=>s.dayString===o);c===-1&&(n.push({dayString:o,totalValue:0,avgRating:0,expenses:[]}),c=n.length-1),n[c].expenses.push(t),n[c].totalValue+=t.value,n[c].avgRating+=t.rating}return n.forEach((t,a)=>{const o=t.expenses.filter(c=>c.rating>0).length;n[a].avgRating=t.avgRating/o}),n},St=r=>{const[n,i]=P.exports.useState([]);return P.exports.useEffect(()=>{i(yt(r.expenses))},[r.expenses]),n.length?l(G,{children:l(v,{p:2,children:n.map((e,t)=>x(v,{children:[x(E,{container:!0,spacing:3,children:[l(E,{item:!0,xs:3,children:l(b,{variant:"h6",children:e.dayString})}),l(E,{item:!0,xs:2}),l(E,{item:!0,xs:2,children:l(b,{variant:"h6",children:l(j,{value:e.totalValue,thousandSeparator:!0,displayType:"text",prefix:"$",decimalScale:2,fixedDecimalScale:e.totalValue%1!==0})})}),l(E,{item:!0,xs:1}),l(E,{item:!0,xs:!0}),l(E,{item:!0,xs:!0})]}),e.expenses.map(a=>l(_,{onClick:()=>{r.editExpense(a)},fullWidth:!0,style:{textAlign:"inherit",fontWeight:"normal"},className:"expense-item",children:x(E,{container:!0,spacing:3,alignItems:"center",children:[l(E,{item:!0,xs:3,children:a.place?x(B,{children:[l(Re,{place:a.place}),l(v,{ml:1,children:a.place.name})]}):null}),l(E,{item:!0,xs:2,children:a.name}),l(E,{item:!0,xs:2,children:l(b,{color:"error",children:l(j,{value:a.value,thousandSeparator:!0,displayType:"text",prefix:"$",decimalScale:2,fixedDecimalScale:a.value%1!==0})})}),l(E,{item:!0,xs:1,children:l(b,{variant:"h6",children:l(V,{justifyContent:"flex-end",children:l(xt,{value:a.rating,color:"#ffb400"})})})}),l(E,{item:!0,xs:!0,children:a.category?x(B,{children:[l(Fe,{category:a.category}),l(v,{ml:1,children:a.category.name})]},a.category.id):null}),l(E,{item:!0,xs:!0,children:a.description})]})},a.id)),t<n.length-1?l(v,{pt:2,pb:1,children:l(Ie,{light:!0})}):null]},t))})}):null},bt=r=>({}),Dt=r=>({editExpense:n=>r(Te(n))});var Et=re(bt,Dt)(St);const wt=r=>{const n=Nt(),i=me(),[e,t]=P.exports.useState(he(r.expenses));return P.exports.useEffect(()=>{t(he(r.expenses))},[r.expenses]),x(B,{children:[l(G,{children:x(v,{p:2,children:[l(b,{variant:"h6",children:"# Expenses"}),l(b,{variant:"h4",children:e.count})]})}),l(v,{mx:2,children:l(G,{children:x(v,{p:2,children:[l(b,{variant:"h6",children:"Total Cost"}),l(b,{variant:"h4",children:l(j,{value:e.totalValue,thousandSeparator:!0,displayType:"text",prefix:"$",decimalScale:2,fixedDecimalScale:e.totalValue%1!==0})})]})})}),l(G,{children:x(v,{p:2,children:[l(b,{variant:"h6",children:"Avg. Rating"}),l(b,{variant:"h4",children:x(B,{children:[l(v,{children:e.avgRating}),l(q,{icon:X,color:i.palette.secondary.main,size:"sm",className:n.starIcon})]})})]})})]})},Nt=Ae(r=>({starIcon:{marginLeft:5,marginBottom:5}})),he=r=>{const n=r.filter(e=>e.rating>0);let i=n.reduce((e,t)=>e+t.rating,0)/n.length;return isNaN(i)?i=0:i=Number(i.toFixed(1)),{count:r.length,totalValue:r.reduce((e,t)=>e+t.value,0),avgRating:i}};var ae={},Ct=Oe.exports,Pt=Ve.exports;Object.defineProperty(ae,"__esModule",{value:!0});var xe=ae.default=void 0,Rt=Pt(P.exports),Ft=Ct(Me),It=(0,Ft.default)(Rt.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");xe=ae.default=It;const Tt=r=>l(ee,K({value:r.value,onChange:r.onChange,name:"numberformat",id:"formatted-numberformat-input",InputProps:{inputComponent:At}},r)),At=r=>{const t=r,{inputRef:n,onChange:i}=t,e=Q(t,["inputRef","onChange"]);return l(j,J(K({},e),{getInputRef:n,onValueChange:a=>{i({target:{name:r.name,value:a.value}})},thousandSeparator:!0,isNumericString:!0,decimalScale:2,prefix:"$"}))},Mt=r=>{const[n,i]=O.useState(0),e=u=>{i(u===n?0:u)},t=()=>{r.startNewExpense(),i(null)},a=()=>{r.closeExpenseModal()},o=(u,d)=>{u.value=parseFloat(u.value),u.rating=n,$.post("/monerate/expense",u).then(p=>{r.addOrUpdateExpense(p.data)}).finally(()=>{d(!1),r.closeExpenseModal()})},c=u=>{window.confirm("Delete this expense?")&&$.delete(`${Xe.monerate.expense}/${u}`).then(d=>{r.removeExpense(u)}).finally(()=>{r.closeExpenseModal()})},s={openModal:"q"},f={openModal:()=>{t()}};return l(ke.exports.GlobalHotKeys,{keyMap:s,handlers:f,children:x(v,{children:[l(Le,{title:"(q) Quick add expense",children:l(_,{variant:"contained",color:"primary",onClick:t,"data-testid":"new-expense-button",children:x(v,{display:"flex",alignItems:"center",children:[l(q,{icon:Ue}),l(v,{ml:1,children:"New Expense"})]})})}),l(Ke,{onClose:a,"aria-labelledby":"customized-dialog-title",open:!!r.editingExpense,fullWidth:!0,maxWidth:"md","data-testid":"edit-expense-modal",children:l(v,{pb:1,px:1,children:l(We,{initialValues:r.editingExpense,onSubmit:(u,{setSubmitting:d})=>{o(u,d)},children:({setFieldValue:u,values:d,isSubmitting:p,handleChange:m})=>{var g;return x(Ge,{children:[l(Vt,{id:"edit-expense-dialog-title",onClose:a,children:d.id?"Edit expense":"New expense"}),x($t,{children:[x(V,{children:[x(v,{children:[l(b,{component:"legend",children:"Place"}),l(_e,{value:(g=d.place)!=null&&g.id?d.place.id:null,onChange:(h,y)=>{u("place",y)}})]}),x(v,{ml:2,children:[l(b,{component:"legend",children:"Name"}),l(ee,{id:"name",name:"name",value:d.name,inputProps:{"aria-label":"expense-name-input"},hiddenLabel:!0,placeholder:"Eggs, PS5 game...",onChange:m})]}),x(v,{ml:2,width:125,children:[l(b,{component:"legend",children:"Value ($)"}),l(Tt,{id:"value",name:"value",value:d.value,hiddenLabel:!0,placeholder:"$",variant:"outlined",autoComplete:"off",onChange:h=>{m(h)},size:"small"})]}),x(v,{ml:2,children:[l(b,{component:"legend",children:"Rating"}),l(v,{mt:1,children:l(qe,{name:"simple-controlled",value:n,onChange:(h,y)=>{e(y)},onKeyPress:h=>{["0","1","2","3","4","5"].includes(h.key)&&e(parseFloat(h.key))}})})]})]}),x(V,{justifyContent:"space-between",children:[x(V,{mt:2,children:[x(v,{children:[l(b,{component:"legend",children:"Category"}),l(ze,{value:d.category?d.category.id:null,onChange:(h,y)=>{u("category",y)}})]}),x(v,{ml:2,flexGrow:1,children:[l(b,{component:"legend",children:"Extra notes"}),l(ee,{id:"description",name:"description",value:d.description,hiddenLabel:!0,onChange:m,fullWidth:!0,multiline:!0,placeholder:"Reminders, links..."})]})]}),x(V,{alignItems:"flex-end",children:[l(_,{type:"submit",disabled:p,variant:"contained",color:"primary",id:"save-expense-button",children:"Save"}),d.id?l(v,{ml:2,children:l(_,{disabled:p,variant:"outlined",color:"secondary",onClick:()=>c(d.id),children:"Delete"})}):null]})]})]})]})}})})})]})})},Ot=r=>Ze({root:{margin:0,padding:r.spacing(2)},closeButton:{position:"absolute",right:r.spacing(1),top:r.spacing(1),color:r.palette.grey[500]}}),Vt=ge(Ot)(r=>{const a=r,{children:n,classes:i,onClose:e}=a,t=Q(a,["children","classes","onClose"]);return x($e,J(K({disableTypography:!0,className:i.root},t),{children:[l(b,{variant:"h6",children:n}),e?l(Be,{"aria-label":"close",className:i.closeButton,onClick:e,children:l(xe,{})}):null]}))}),$t=ge(r=>({root:{paddingLeft:r.spacing(2),paddingRight:r.spacing(2),paddingBottom:r.spacing(2)}}))(je),Bt=r=>({editingExpense:r.monerate.editingExpense}),jt=r=>({addOrUpdateExpense:n=>r(He(n)),removeExpense:n=>r(Je(n)),startNewExpense:()=>r(Qe()),closeExpenseModal:()=>r(Ye())});var kt=re(Bt,jt)(Mt);const Lt=r=>{const[n,i]=P.exports.useState([]);return P.exports.useEffect(()=>{document.title="Monerate",$.get("/monerate/expense/").then(e=>{r.setExpenses(e.data)}),$.get("/monerate/place").then(e=>{r.setPlaces(e.data)}),$.get("/monerate/category").then(e=>{r.setCategories(e.data)})},[]),P.exports.useEffect(()=>{i(st(r.filter,r.expenses))},[r.expenses,r.filter]),x(et,{children:[l(v,{mt:4}),l(kt,{}),l(v,{mt:3,children:l(tt,{})}),l(v,{mt:3,children:l(wt,{expenses:n})}),l(v,{mt:3,children:l(Et,{expenses:n})}),l(rt,{}),l(at,{})]})},Ut=r=>({expenses:r.monerate.expenses,filter:r.monerate.filter}),Kt=r=>({setExpenses:n=>r(nt(n)),setPlaces:n=>r(it(n)),setCategories:n=>r(ot(n))});var _t=re(Ut,Kt)(Lt);export{_t as default};
